
1. Клиент подключается к WebSocket-серверу.
2. Клиент отправляет сообщение с `nickname` и опционально с `user_id`.
3. Сервер проверяет наличие `user_id` в сообщении:
   - Если `user_id` отсутствует, сервер создаёт нового пользователя с указанным `nickname` и возвращает клиенту сгенерированный `user_id`.
   - Если `user_id` присутствует, сервер проверяет существующего пользователя с таким `user_id` и сравнивает `nickname`:
     - Если `nickname` отличается от сохранённого в базе, сервер обновляет `nickname` пользователя.
     - Сервер подтверждает клиенту успешное подключение и использование существующего `user_id`.

